<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>YATTA - Yet Another Time Table App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
  -->
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" id="light" href="./light.css">
    <link rel="stylesheet" id="dark" media="none" href="./dark.css">
    <link rel="icon" type="image/png" href="./favicon.png">
    <script src="./moment.js"></script>
    <script src="./yatta.js"></script>
  </head>
  <body>
    <div class="wrapper">
      <div class="header">
        <div class="left">
          <span id="settings-icon" title="Settings">&#9776;</span>
        </div>
        <div class="center">
          <span id="clock">--:--</span>
        </div>
        <div class="right">
          <span id="fullscreen-icon" class="hidden" title="Fullscreen">&#9634;</span>
        </div>
      </div>
      <div id="welcome" class="invisible">
        <h1>YATTA</h1>
        <p>Welcome to Yet Another Time Table Application.</p>
        <p>This app shows real time information on Västtrafik departures for a given stop (similar to the "Nästa tur" digital displays).</p>
        <p>Click the menu bar in the upper-left corner to configure what stop, lines and tracks to monitor.</p>
      </div>
      <table id="table"></table>
      <form id="settings-form" class="invisible">
        <div class="setting">
          <h2>Settings</h2>
          <label for="apiKey">API Key</label>
          <div class="setting--row">
            <input id="apiKey" type="text" name="apiKey" pattern="[A-z0-9]{76}" value="" required">
            <input id="apiKeyHelper" type="button" value="Verify">
          </div>
          <span id="apiKeyHelper-normal" class="helper">76-character Västtrafik API key</span>
        </div>
        <div class="setting">
          <label for="stopName">Stop name</label>
          <input id="stopName" name="suggestions" list="suggestions" placeholder="SKF, Göteborg">
          <datalist id="suggestions"></datalist>
          <span class="helper">Search for stop</span>
        </div>
        <div class="setting">
          <label for="stopId">Stop ID</label>
          <input id="stopId" type="text" name="stopId" pattern="[0-9]{16}" placeholder="9021014005862000" required disabled>
          <span class="helper">16-digit stop ID</span>
        </div>
        <div class="setting">
          <label for="tracks">Included tracks (optional)</label>
          <input id="tracks" type="text" name="tracks" pattern="[A-z](\s*,\s*[A-z])*" placeholder="A,C">
          <span class="helper">Comma-separated list of tracks</span>
        </div>
        <div class="setting">
          <label for="lines">Included lines (optional)</label>
          <input id="lines" type="text" name="lines" placeholder="6,7,11" pattern="[0-9A-zåäöÅÄÖ]+(\s*,\s*[0-9A-zåäöÅÄÖ]+)*">
          <span class="helper">Comma-separated list of lines</span>
        </div>
        <div class="setting">
          <label for="updateInterval">Update interval (optional)</label>
          <input id="updateInterval" type="text" name="updateInterval" pattern="[0-9]{2,}" placeholder="30">
          <span class="helper">Update interval (default 30s)</span>
        </div>
        <div class="setting setting--row">
          <input id="blinkClock" type="checkbox" name="blinkClock" checked>
          <label for="blinkClock">Blink clock on refresh</label>
        </div>
        <div class="setting setting--row">
          <input id="groupDepartures" type="checkbox" name="groupDepartures" checked>
          <label for="groupDepartures">Group lines together</label>
        </div>
        <div class="setting setting--row">
          <input id="absoluteTime" type="checkbox" name="absoluteTime">
          <label for="absoluteTime">Use absolute time</label>
        </div>
        <div class="setting setting--row">
          <input id="showDestinations" type="checkbox" name="showDestinations">
          <label for="showDestinations">Show destinations</label>
        </div>
        <div class="setting setting--row">
          <input id="showTracks" type="checkbox" name="showTracks">
          <label for="showTracks">Show tracks</label>
        </div>
        <div class="setting setting--row">
          <input id="darkTheme" type="checkbox" name="darkTheme">
          <label for="darkTheme">Use dark theme</label>
        </div>
        <div class="setting">
          <input id="submit" type="submit" name="submit" value="Save">
        </div>
      </form>
    </div>
    <script>
    if('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    };
    </script>
  </body>
